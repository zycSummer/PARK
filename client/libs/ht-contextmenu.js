!function(a,o){"use strict";var j="ht",E=a[j],g="position",l="absolute",L="px",I="left",R="top",F="innerHTML",J="className",t="width",x="height",H="0",k="display",z="none",r="visibility",Q="user-select",B="margin",N="padding",U=null,T=E.Color,e=E.Default,W=e.getInternal(),w=a.setTimeout,A=a.setInterval,d=a.clearTimeout,u=a.clearInterval,P=a.parseInt,_=e.isLeftButton,Y=e.isDragging,O=e.startDragging,C=e.getDistance,S=e.isTouchable,K=T.widgetIconHighlight,s=T.widgetIconBorder,q=T.widgetIconGradient,c=function(){return document},Z=function(G,R){return G.querySelectorAll(R)},G=function(m){var u=c().createElement(m);return"ul"===m&&(h(u,g,"relative"),h(u,B,H),h(u,N,H),h(u,"list-style",z),h(u,"box-sizing","border-box"),h(u,"-moz-box-sizing","border-box"),h(u,k,"inline-block"),h(u,"vertical-align","text-bottom"),h(u,"border","1px solid "+e.contextMenuBorderColor),h(u,"box-shadow","0 0 16px 1px "+e.contextMenuShadowColor),h(u,"overflow","hidden"),e.contextMenuBorderRadius&&h(u,"border-radius",e.contextMenuBorderRadius+L)),u},V=function(L){var v=L.touches[0];return v?v:L.changedTouches[0]},M=function(){return G("div")},m=function(){return G("canvas")},h=function(G,L,k){G.style.setProperty(L,k,U)},f=function(c,A,j){e.def(E.widget[c],A,j)},D=function(f,P){f.appendChild(P)},X=function(M,x){M.removeChild(x)},v=W.addEventListener,y=W.removeEventListener;W.addMethod(e,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:s},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:K}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:s},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:K,gradient:e.imageGradient,gradientColor:q,background:K}]},contextMenuLabelFont:(S?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var i=function(t){var U=this,B=t._view;if(U.$11b=t,U.addListeners(),v(B,"contextmenu",function(X){X.preventDefault()}),!S){var s=U.$37b=U.$36b.bind(U);v(B,"mouseover",s),v(B,"mouseout",s)}};e.def(i,o,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(h){if(e.preventDefault(h),_(h)){for(var Z=this,s=Z.$11b,l=Z.getView(),f=l.children,I=0;I<f.length;I++){var K=f[I],J=K.$24b,P=K.$25b;if(J&&J.contains(h.target))return s.scrollUp(K),Z.$28b=w(function(){Z.$29b=A(function(){s.scrollUp(K)},100)},500),O(Z,h),void 0;if(P&&P.contains(h.target))return s.scrollDown(K),Z.$28b=w(function(){Z.$29b=A(function(){s.scrollDown(K)},100)},500),O(Z,h),void 0}S&&(h=V(h)),Z.$30b={x:h.pageX,y:h.pageY}}},handle_mousedown:function(H){this.handle_touchstart(H)},handle_touchend:function(Z){if(_(Z)){var f=this,W=f.$30b,D=S?{x:V(Z).pageX,y:V(Z).pageY}:{x:Z.pageX,y:Z.pageY};if(!W||C(W,D)>1)return delete f.$30b,void 0;for(var c=f.getView(),x=f.$11b,I=Z.target,v=U,J=U,A=x._items,N=c.$26b,H=0;H<N.length;H++)if(J=N[H],J.contains(I)){v=J.getAttribute("data-id");break}if(v&&A){var X=x.$17b(A,function(w){return w._id===v});if(X){var o=!1;X.disabled instanceof Function?o=X.disabled.call(x,X):X.disabled===!0&&(o=!0),o||(X.items?S&&f.$36b(J,!0):x.$1b(X,Z))}}delete f.$30b}},$36b:function(O,C){if(!Y()){var g,F=this,v=F.$11b,z=F.getView(),N=v.$20b||z.children[0],B=v.$19b,b=z.$26b,c=z.children,u=O.target,f=z.getBoundingClientRect(),l=e.getWindowInfo(),G=l.width,D=l.height,j=function(i){for(var W=0;W<c.length;W++){var V=c[W],t=new RegExp(i+"$"),F=V[J];if(F&&(t.test(F)||F.indexOf(i+" ")>=0))return V}},n=function(i){for(var E=0;E<b.length;E++){var m=b[E],k=new RegExp(i+"$"),r=m[J];if(r&&(k.test(r)||r.indexOf(i+" ")>=0))return m}},M=function(M){var J=n("menu-item"+M.$45b),K=J.getBoundingClientRect(),j=K.top-f.top,g=K.left-f.left;h(M,R,j+L),h(M,I,g+K.width+L);var o=M.getBoundingClientRect(),x=o.top,e=o.left,d=o.height,C=o.width,U=x+d+2,N=e+C+2;U>D&&h(M,R,j+D-U+L),N>G&&h(M,I,g-C+L)};if(C)g=O;else{if("mouseover"===O.type){for(var a=0;a<b.length;a++){var S=b[a];if(S.contains(u)){g=S;break}}if(!g&&B){var q=B.parentNode,X=j("submenu"+B.getAttribute("data-id"));(X&&X.contains(u)||q&&q.contains(u))&&(g=B)}}else if("mouseout"===O.type){for(var H=!1,t=O.relatedTarget,a=0;a<c.length;a++){var E=c[a];if("hidden"!==E.style.visibility&&E.contains(t)){H=!0;break}}if(H)return}!g&&N&&(g=n("menu-item"+(N.$45b||"NaN")))}if(g!=B){if(B)for(var W=B;W;){if(W[J]=W[J].replace(" menu-item-hover",""),W[J].indexOf("disabled")<0){var A=v.getItemByProperty("_id",W.getAttribute("data-id"));null!=A.background?A.background instanceof Function?h(W,"background-color",A.background.call(v,A)):h(W,"background-color",A.background):h(W,"background-color",e.contextMenuBackground),h(W,"color",e.contextMenuLabelColor)}var K=j("submenu"+W.getAttribute("data-id"));K&&h(K,r,"hidden");var x=W.parentNode;W=n("menu-item"+(x.$45b||"NaN"))}if(g){for(var P=g,o=[];P;){P[J]+=" menu-item-hover",P[J].indexOf("disabled")<0&&(h(P,"background-color",e.contextMenuHoverBackground),h(P,"color",e.contextMenuHoverLabelColor));var w=j("submenu"+P.getAttribute("data-id"));w&&(h(w,r,"visible"),o.push(w));var x=P.parentNode;P=n("menu-item"+(x.$45b||"NaN"))}o.reverse(),o.forEach(function(H){M(H)})}}v.$19b=g,v.$20b=g?g.parentNode:z.children[0]}},handle_mouseup:function(q){this.handle_touchend(q)},handleWindowTouchEnd:function(){var O=this;O.$28b!=U&&(d(O.$28b),delete O.$28b),O.$29b!=U&&(u(O.$29b),delete O.$29b),delete O.$34b,delete O.$30b,delete O.$35b},handleWindowMouseUp:function(D){this.handleWindowTouchEnd(D)},handle_mousemove:function(q){this.handle_touchmove(q)},handle_touchmove:function(L){if(!Y()&&_(L)){for(var h=this,t=h.getView().children,v=U,i=0;i<t.length;i++){var T=t[i];if(T.contains(L.target)){v=T;break}}var J=h.$30b,q=S?{x:V(L).pageX,y:V(L).pageY}:{x:L.pageX,y:L.pageY};v&&J&&C(J,q)>2&&(O(h,L),h.$34b=v,h.$35b=v.$18b)}},handleWindowTouchMove:function(k){k.preventDefault();var X=this,W=X.$11b,F=X.$34b,o=X.$35b,G=X.$30b;if(G&&F){var y=S?{x:V(k).pageX,y:V(k).pageY}:{x:k.pageX,y:k.pageY},z=y.y-G.y;z>0?W.scrollUp(F,F.$18b-(o-z)):W.scrollDown(F,o-z-F.$18b)}},handleWindowMouseMove:function(i){this.handleWindowTouchMove(i)},$10b:function(S,B){S.preventDefault();for(var A=this,C=A.getView().children,e=U,h=0;h<C.length;h++){var b=C[h];if(b.contains(S.target)){e=b;break}}if(e){var k=this.$11b,w=k.getRowHeight();Math.abs(B)>.05&&(B>0?k.scrollUp(e,B*w):0>B&&k.scrollDown(e,-B*w))}},handle_mousewheel:function(A){this.$10b(A,A.wheelDelta/40)},handle_DOMMouseScroll:function($){this.$10b($,-$.detail)},$44b:function(v){this.getView().contains(v.target)||this.$11b.hide()},$41b:function(r){this.$11b.show(r)},$4b:function(r,d){var v=this.$11b;if(d=d||v._items,d&&d.length&&r.keyCode){var P=[r.keyCode];r.shiftKey&&P.push(16),r.ctrlKey&&P.push(17),r.altKey&&P.push(18),/mac/.test(a.navigator?a.navigator.userAgent.toLowerCase():"")?r.metaKey&&P.push(17):r.metaKey&&P.push(91),P.sort();var D=P.join(),e=v.$17b(d,function(v){if(v.key){var H=v.key.slice(0);return H.sort(),D===H.join()}});if(e){e.preventDefault!==!1&&r.preventDefault();var h=!1;e.disabled instanceof Function?h=e.disabled.call(v,e):e.disabled===!0&&(h=!0),h||v.$1b(e,r)}}},$39b:function(Q){var P=this,z=V(Q);P.$32b={x:z.pageX,y:z.pageY}},$38b:function(L){var c=this,z=V(L);c.$31b={x:z.pageX,y:z.pageY},c.$33b=w(function(){c.$31b&&(c.$32b?C(c.$31b,c.$32b)<10&&c.$11b.show(L):c.$11b.show(L)),delete c.$33b,delete c.$31b,delete c.$32b},600)},$40b:function(){var h=this;h.$33b!=U&&(d(h.$33b),delete h.$33b,delete h.$31b,delete h.$32b)}}),E.widget.ContextMenu=function(q){var R=this,v=R._view=W.createView(null,R);v[J]="ht-widget-contextmenu",R.setItems(q),R.$13b=new i(R),h(v,"font",e.contextMenuLabelFont),h(v,g,l),h(v,"cursor","default"),h(v,"-webkit-"+Q,z),h(v,"-moz-"+Q,z),h(v,"-ms-"+Q,z),h(v,Q,z),h(v,"box-sizing","border-box"),h(v,"-moz-box-sizing","border-box"),e.baseZIndex!=U&&h(v,"z-index",P(e.baseZIndex)+2+""),R.$3b=function(I){R.$13b.$4b(I)}},f("ContextMenu",o,{$5b:0,_items:U,$21b:U,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var L=this,J=L._enableGlobalKey;J===!1&&(v(c(),"keydown",L.$3b),L._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,y(c(),"keydown",this.$3b)},setItems:function(y){this._items=y},getItems:function(){return this._items},setVisibleFunc:function(W){this.$16b=W},setLabelMaxWidth:function(A){this.$43b=A},$1b:function(n,T){var k=this;if("check"===n.type)n.selected=!n.selected;else if("radio"===n.type){var E=n.groupId;k.$17b(k._items,function(P){P.groupId===E&&(P.selected=!1)}),n.selected=!0}if(k.hide(),n.action)n.action.apply(n.scope||k,[n,T]);else if(n.href){var L=n.linkTarget||"_self";a.open(n.href,L)}},getItemById:function(a){return this.getItemByProperty("id",a)},setItemVisible:function(i,T){var R=this.getItemById(i);R&&(R.visible=T)},getItemByProperty:function(l,i,$){var S=this;if($=$||S._items,!$||0===$.length)return U;var E=S.$17b($,function(t){return t[l]===i});return E||U},scrollUp:function(t,z){var D=this;if(z=z==U?20:z,z=P(z),0!==z){var r=0;t.$18b>z&&(r=t.$18b-z),D.$42b(t,r),t.scrollTop=r,t.$18b=r}},scrollDown:function(f,B){var N=this;if(B=B==U?20:B,B=P(B),0!==B){var R=f.$22b,g=f.$23b,V=R-g;g+f.$18b+B<R&&(V=f.$18b+B),N.$42b(f,V),f.scrollTop=V,f.$18b=V}},$42b:function(i,r){r=r==U?i.$18b:r;var J=i.$24b,D=i.$25b;J&&(h(J,"top",r+L),0==r?h(J,k,z):h(J,k,"block")),D&&(h(D,"bottom",-r+L),r==i.$22b-i.$23b?h(D,k,z):h(D,k,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(u,H){for(var B=0;B<u.length;B++){var M=u[B];if(H(M))return M;if(M.items){var W=this.$17b(M.items,H);if(W)return W}}},$2b:function(U,C){for(var n=this,$=0;$<U.length;$++){n.$5b++;var P=U[$];if(P.visible!==!1&&!(e.isFunction(P.visible)&&P.visible()===!1||n.$16b&&!n.$16b.call(n,P))){var R=G("li"),o=n.$5b+"";if(h(R,"white-space","nowrap"),h(R,k,"block"),"separator"===P||P.separator===!0){var T=M();T[J]="separator",h(T,x,e.contextMenuSeparatorWidth+L),h(T,"background",e.contextMenuSeparatorColor),D(R,T)}else{P._id=o,R.setAttribute("data-id",o);var I=G("span"),H=G("span"),s=m(),z=M();if(h(I,k,"inline-block"),h(I,x,"1.2em"),h(H,k,"inline-block"),h(H,x,"1.2em"),h(H,"line-height","1.2em"),s[J]="prefix",h(s,k,"inline-block"),h(s,t,"1em"),h(s,x,"1em"),h(s,"vertical-align","middle"),h(s,B,"0 0.2em"),"check"===P.type&&P.selected?s[J]+=" check-prefix":"radio"===P.type&&P.selected&&(s[J]+=" radio-prefix"),D(R,s),P.icon){var V=m();V[J]="contextmenu-item-icon",h(V,k,"inline-block"),h(V,x,"1.2em"),h(V,t,"1.2em"),h(V,"margin-right","0.2em"),h(V,"float","left"),V.$50b=P.icon,V._item=P,D(I,V)}if(H[F]=P.label,D(I,H),D(R,I),z[J]="suffix",h(z,k,"inline-block"),h(z,"margin-left","1em"),h(z,"margin-right","0.4em"),h(z,"text-align","right"),h(z,"font-size","75%"),P.items&&(z[F]=e.contextMenuSubmenuMark),P.suffix&&(z[F]=P.suffix),D(R,z),R[J]="menu-item menu-item"+o,null!=P.background?P.background instanceof Function?h(R,"background-color",P.background.call(n,P)):h(R,"background-color",P.background):h(R,"background-color",e.contextMenuBackground),h(R,"color",e.contextMenuLabelColor),h(R,N,"3px 0"),P.disabled instanceof Function){var w=P.disabled.call(n,P);w&&(R[J]+=" disabled",h(R,"color",e.contextMenuDisabledLabelColor))}else P.disabled&&(R[J]+=" disabled",h(R,"color",e.contextMenuDisabledLabelColor));if(P.items){n.$21b||(n.$21b=new E.List);var X=G("ul");X[J]="submenu"+o,X.$45b=o,h(X,r,"hidden"),h(X,g,l),D(n._view,X),n.$21b.add(X),n.$2b(P.items,X)}}D(C,R)}}},rebuild:function(){var E=this,W=E._items,e=E._view;if(e&&(e[F]="",E.$21b=U,E.$5b=0,E.$19b=U,E.$20b=U,e.$26b=U,W&&0!==W.length)){var t=G("ul",E._r);D(e,t),E.$2b(W,t)}},addTo:function(W){if(W){var d=this,J=d.$13b;if(d.$12b=W,d.$9b=function(N){J.$44b(N)},d.$27b=function(K){J.$41b(K)},S){var Q=d.$6b=function(q){J.$38b(q)},g=d.$7b=function(q){J.$39b(q)},L=d.$8b=function(D){J.$40b(D)};v(W,"touchstart",Q,!0),v(W,"touchmove",g),v(W,"touchend",L)}else v(W,"contextmenu",d.$27b)}},showOnView:function(A,R,b){A=A.getView?A.getView():A;var n=e.getWindowInfo(),F=A.getBoundingClientRect();this.show(F.left+n.left+R,F.top+n.top+b)},show:function(n,j,a){var N=this,a=a==U?!0:!1,B=N._view;if(B){if(N.invalidate(),1===arguments.length){var X=n;if(S){var A=V(X);n=A.pageX,j=A.pageY}else n=X.pageX,j=X.pageY}var m=e.getWindowInfo(),W=m.width,T=m.height,i=m.left,z=m.top,s={pageX:n,pageY:j,clientX:n-i,clientY:j-z,target:1,originEvent:X},o=s.clientX,p=s.clientY,O=function(d){d.style.height=T-6+L;var Q=M(),S=M(),z=function(D){h(D,g,l),h(D,"text-align","center"),h(D,t,"100%"),h(D,"font-size",10+L),h(D,"padding","2px 0"),h(D,"border","0px solid "+e.contextMenuScrollerBorderColor),h(D,"background-color",e.contextMenuScrollerColor1),D.style.backgroundImage="-webkit-linear-gradient(top, "+e.contextMenuScrollerColor1+", "+e.contextMenuScrollerColor2+")",D.style.backgroundImage="linear-gradient(to bottom, "+e.contextMenuScrollerColor1+", "+e.contextMenuScrollerColor2+")"};Q[J]="menu-arrow-item menu-arrow-item-top",S[J]="menu-arrow-item menu-arrow-item-bottom",z(Q),h(Q,"top",H),h(Q,"left",H),h(Q,"border-bottom-width",1+L),Q[F]="▲",z(S),h(S,"bottom",H),h(S,"left",H),h(S,"border-top-width",1+L),S[F]="▼",d.$24b=Q,d.$25b=S,d.$18b=d.scrollTop,d.$22b=d.scrollHeight,d.$23b=d.clientHeight,D(d,Q),D(d,S),N.$42b(d)};N.beforeShow&&N.beforeShow(s);var Q=N._items;if(Q&&(X&&X.preventDefault(),Q.length)){N.rebuild(),e.appendToScreen(B),B.$26b=Z(B,".menu-item");var C=B.children[0];C.offsetHeight>T&&O(C);var d=p+(a?1:0),K=o+(a?1:0),$=function(l){for(var K=0,$=0,j=0,C=N.$43b;j<l.children.length;j++){var J=l.children[j];if(J.getAttribute("data-id")){var c=J.children[1],W=J.children[2],s=c.children;if(C){var D=s[0];s.length>1&&(D=s[1]),D.offsetWidth>C&&(D[F]="<marquee scrollamount='3'>"+D[F]+"</marquee>",D.children[0].style.verticalAlign="text-bottom",h(D,t,C+L),h(D,k,"inline-block"))}var i=c.offsetWidth,b=W.offsetWidth;i>K&&(K=i),b>$&&($=b)}}for(j=0;j<l.children.length;j++){var J=l.children[j];if(J.getAttribute("data-id")){var c=J.children[1],W=J.children[2],o=c.children[0],X=c.children[1];!X&&o.style.width&&h(o,t,K+L),h(c,t,K+L),h(W,t,$+L)}}};$(C);var G=p+3+B.offsetHeight,f=o+3+B.offsetWidth;G>T?h(B,R,d-(G-T)+z+L):h(B,R,d+z+L),f>W?h(B,I,K-(f-W)+i+L):h(B,I,K+i+L);var x=N.$21b;x&&x.each(function(c){$(c),c.offsetHeight>T&&O(c)}),N.$9b&&v(c(),S?"touchstart":"mousedown",N.$9b,!0),N.afterShow&&N.afterShow(s),N.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=U:!1},getRelatedView:function(){return this.$12b},hide:function(){var t=this,C=t._view;C&&C.parentNode&&(X(C.parentNode,C),y(c(),S?"touchstart":"mousedown",t.$9b,!0),t.afterHide&&t.afterHide())},dispose:function(){var e=this,J=e.$12b,q=e._view;q&&(q.parentNode&&X(q.parentNode,q),e.disableGlobalKey(),J&&(S?(y(J,"touchstart",e.$6b,!0),y(J,"touchmove",e.$7b),y(J,"touchend",e.$8b)):y(J,"contextmenu",e.$27b)),e._view=e._items=e.$21b=e.$19b=e.$12b=e.beforeShow=e.afterShow=e.afterHide=e.$9b=e.$3b=e.$6b=e.$7b=e.$8b=e.$27b=U)},$46b:function(I,q,b,k,Z){var m=W.initContext(I);W.translateAndScale(m,0,0,1),m.clearRect(0,0,b,k),e.drawStretchImage(m,e.getImage(q),"fill",0,0,b,k,Z,this),m.restore()},$47b:function(){var H,R,h,j=this,Y=j._view;if(j.isShowing()){var S=Z(Y,".check-prefix");for(h=0;h<S.length;h++){var i=S[h];H=i.clientWidth,R=i.clientHeight,i.$48b=H,i.$49b=R,W.setCanvas(i,H,R)}var v=Z(Y,".radio-prefix");for(h=0;h<v.length;h++){var N=v[h];H=N.clientWidth,R=N.clientHeight,N.$48b=H,N.$49b=R,W.setCanvas(N,H,R)}var k=Z(Y,".contextmenu-item-icon");for(h=0;h<k.length;h++){var f=k[h];H=f.clientWidth,R=f.clientHeight,f.$48b=H,f.$49b=R,W.setCanvas(f,H,R)}}},validateImpl:function(){var X,A,b,t=this,I=t._view;if(t.isShowing()){var _=Z(I,".check-prefix");for(b=0;b<_.length;b++){var i=_[b];X=i.$48b,A=i.$49b,X&&A&&t.$46b(i,e.contextMenuCheckIcon,X,A)}var R=Z(I,".radio-prefix");for(b=0;b<R.length;b++){var d=R[b];X=d.$48b,A=d.$49b,X&&A&&t.$46b(d,e.contextMenuRadioIcon,X,A)}var z=Z(I,".contextmenu-item-icon");for(b=0;b<z.length;b++){var a=z[b];X=a.$48b,A=a.$49b,X&&A&&t.$46b(a,e.getImage(a.$50b),X,A,a._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);