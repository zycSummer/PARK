!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.ht=e.ht||{},e.ht.vector=t())}(this,function(){"use strict";var ie={HOVER:"ht.hover",ACTIVE:"ht.active",PRESSED:"ht.pressed",DISABLED:"ht.disabled",FOCUS:"ht.focus",FONT_SIZE:"ht.fontSize",FONT_FAMILY:"ht.fontFamily",FONT:"ht.font",VALUE:"ht.value",PLACEHOLDER:"ht.placeholder",TEXT_COLOR:"ht.textColor",PADDING:"ht.padding",EDITING:"ht.editing",TEXT_ALIGN:"ht.textAlign",LINE_HEIGHT:"ht.lineHeight",WORD_BREAK:"ht.wordBreak",CHECKED:"ht.checked",LABEL:"ht.label",ICON:"ht.icon",FORM_ITEM_NAME:"ht.name",FORM_ITEM_GROUP:"ht.group",ON_CLICK:"ht.onClick",ON_CHANGE:"ht.onChange",ON_KEYDOWN:"ht.onKeyDown",ON_KEYUP:"ht.onKeyUp",ON_SELECT_ROW:"ht.onSelectRow",DROP_DOWN:"ht.dropDown",FORMAT:"ht.format",SHOW_TIME:"ht.showTime",DATA_SOURCE:"ht.dataSource",DROP_ICON_WIDTH:"ht.dropIconWidth",DROP_ICON_HEIGHT:"ht.dropIconHeight",DROP_ROW_HEIGHT:"ht.dropRowHeight",DROP_WIDTH:"ht.dropWidth",DROP_BACKGROUND:"ht.dropBackground",DROP_HOVER_BACKGROUND:"ht.dropHoverBackground",DROP_LABEL_FONT:"ht.dropLabelFont",DROP_LABEL_COLOR:"ht.dropLabelColor",DROP_ACTIVE_LABEL_COLOR:"ht.dropActiveLabelColor",DROP_ACTIVE_BACKGOUND:"ht.dropActiveBackground",DROP_MAX_HEIGHT:"ht.dropMaxHeight",INPUT_TYPE:"ht.inputType",MAX_LENGTH:"ht.maxLength",HOVER_INDEX:"ht.hoverIndex",DATASOURCE:"ht.dataSource",ROW_HEIGHT:"ht.rowHeight",HEAD_HEIGHT:"ht.headHeight",TRANSLATE_X:"ht.translateX",TRANSLATE_Y:"ht.translateY",SHOW_HEAD:"ht.showHead",SELECT_INDEX:"ht.selectedIndex",SCROLL_BAR_VISIBLE:"ht.scrollBarVisible",AUTO_HIDE_SCROLL_BAR:"ht.autoHideScrollBar"},ne="top",le="bottom",ue="right",he="left",se="center",i="multiple",n="single",_="radio",w="checkbox",l=(function(){function h(e){this.value=e}function e(r){var i,n;function l(e,t){try{var a=r[e](t),o=a.value;o instanceof h?Promise.resolve(o.value).then(function(e){l("next",e)},function(e){l("throw",e)}):u(a.done?"return":"normal",a.value)}catch(e){u("throw",e)}}function u(e,t){switch(e){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}(i=i.next)?l(i.key,i.arg):n=null}this._invoke=function(o,r){return new Promise(function(e,t){var a={key:o,arg:r,resolve:e,reject:t,next:null};n?n=n.next=a:(i=n=a,l(o,r))})},"function"!=typeof r.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),a=function(){function o(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e}}(),O=function e(t,a,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,a);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,a,o)}if("value"in r)return r.value;var n=r.get;return void 0!==n?n.call(o):void 0},u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},oe=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],o=!0,r=!1,i=void 0;try{for(var n,l=e[Symbol.iterator]();!(o=(n=l.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},de=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)},e=ht.Default,j=e.drawText,K=e.drawStretchImage,z=e.getImage,Z=[2,8],re={placeholderColor:"#737373",fontSize:12,fontFamily:"arial,  sans-serif",emptyColor:"rgba(0,0,0,0)",hoverDarker:5,activeDarker:11},t=ht.Default,$=t.drawText,q=t.drawStretchImage,J=t.getImage,Q=ht.Default.drawText,s=/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/,d=/^[rR][gG][Bb][\(]((2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){2}((2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?))\)$/,c=/^[rR][gG][Bb][Aa][\(]((2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?),){3}(0\.\d{1,22}|1|0)?[\)]{1}$/,g=function(){function r(e,t,a,o){l(this,r),this.r=null,this.g=null,this.b=null,this.a=null,e&&this.setColor(e,t,a,o)}return a(r,[{key:"setColor",value:function(e,t,a,o){if(e&&!t)if(e=e.replace(/\s+/g,""),s.test(e))4===e.length?(this.r=parseInt(e[1]+e[1],16),this.g=parseInt(e[2]+e[3],16),this.b=parseInt(e[3]+e[3],16)):7===e.length&&(this.r=parseInt(e.substring(1,3),16),this.g=parseInt(e.substring(3,5),16),this.b=parseInt(e.substring(5,7),16));else if(d.test(e)){var r=(e=e.replace(/[rRgGbB\(\)\s]*/g,"")).split(",");this.r=parseInt(r[0]),this.g=parseInt(r[1]),this.b=parseInt(r[2])}else if(c.test(e)){var i=(e=e.replace(/[rRgGbBaA\(\)\s]*/g,"")).split(",");this.r=parseInt(i[0]),this.g=parseInt(i[1]),this.b=parseInt(i[2]),this.a=parseFloat(i[3])}}},{key:"toString",value:function(){return 1!==this.a&&null!==this.a?this.getRGBA():this.getWebColor()}},{key:"getRGB",value:function(){var e=this.r,t=this.g,a=this.b;return null!==e&&null!==t&&null!==a?"rgb("+e+", "+t+", "+a+")":null}},{key:"getRGBA",value:function(){var e=this.r,t=this.g,a=this.b,o=this.a;return null!==e&&null!==t&&null!==a?"rgba("+e+", "+t+", "+a+", "+(null===o?1:o.toFixed(2))+")":null}},{key:"getWebColor",value:function(){var e=this.r,t=this.g,a=this.b;return null!==e&&null!==t&&null!==a?"#"+this._getWebValue(e)+this._getWebValue(t)+this._getWebValue(a):null}},{key:"_getWebValue",value:function(e){var t=e.toString(16);return 1===t.length&&(t="0"+t),t}}]),r}(),o=ht.Default,M=o.drawText,G=o.drawStretchImage,U=o.getImage,X="#ffffff",Y="#cccccc",F=new g,r=ht.Default,ce=r.drawText,ge=r.drawStretchImage,fe=r.getImage,ee=function(e,t){return e<=1?t*e:e},te=void 0,ae=void 0,ve=void 0,pe=void 0,ye=void 0,_e=void 0,De=function(e,t){return t?(e-_e)/te*ae+ve:pe-(e-_e)/te*ae},be=ht.Default.drawText,we=function(e,t){return e<1?t*e:e},Ve=ht.Default.drawRoundRect,me=4;var f=ht.Default,Ee=f.drawText,Ce=f.drawStretchImage,ke=f.getImage,Te=f.drawBorder,S=ht.Default.drawText,v=function(){function e(){l(this,e)}return a(e,[{key:"onDown",value:function(e,t,a,o,r,i){}},{key:"onUp",value:function(e,t,a,o,r,i){}},{key:"onMove",value:function(e,t,a,o,r,i){}},{key:"onEnter",value:function(e,t,a,o,r,i){}},{key:"onHover",value:function(e,t,a,o,r,i){}},{key:"onLeave",value:function(e,t,a,o,r,i){}},{key:"onBeginDrag",value:function(e,t,a,o,r,i){}},{key:"onDrag",value:function(e,t,a,o,r,i){}},{key:"onEndDrag",value:function(e,t,a,o,r,i){}},{key:"onScroll",value:function(e,t,a,o,r,i){}}]),e}(),p=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,v),a(t,[{key:"onEnter",value:function(e,t,a,o,r,i){a.getDataUI(t).interactiveInfo.defaultCursor=a.getView().style.cursor,t.a(ie.DISABLED)?a.setCursor("not-allowed"):a.setCursor("text")}},{key:"onLeave",value:function(e,t,a,o,r,i){var n=a.getDataUI(t);a.setCursor(n.interactiveInfo.defaultCursor||"default")}},{key:"onDown",value:function(e,a,o,t,r,i){if(!a.a(ie.DISABLED)&&!a.a(ie.EDITING)){var n=a.a(ie.FONT),l=Me("textarea"),u=a.a(ie.TEXT_COLOR),h=l.style,s=a.a(ie.VALUE),d=a.a(ie.PLACEHOLDER),c=a.a(ie.LINE_HEIGHT),g=a.a(ie.TEXT_ALIGN),f=a.a(ie.WORD_BREAK),v=a.a(ie.MAX_LENGTH),p=a.a(ie.ON_KEYDOWN),y=a.a(ie.ON_KEYUP),_=a.a(ie.ON_CHANGE),D=Ne(a.a(ie.PADDING)),b=oe(D,4),w=b[0],V=b[1],m=b[2],E=b[3];h.color=u,h.font=n,h.paddingTop=w+"px",h.paddingRight=V+"px",h.paddingBottom=m+"px",h.paddingLeft=2+E+"px",h.textAlign=g,h.resize="none",h.overflow="hidden",h.lineHeight=c+"px",h.wordBreak=f?"break-all":"keep-word",l.value=s||"",l.placeholder=d||"",v&&l.setAttribute("maxlength",v),o.appendHTML(l);var C=tt(o,a,this);C&&Ge(o,l,C),a.a(ie.EDITING,!0);var k=function(e){Ge(o,l,C)},T=function e(t){o.getDataAt(t)!==a&&(t.preventDefault(),a.a(ie.VALUE,l.value),o.getView().removeChild(l),a.a(ie.EDITING,!1),o.ump(k),o.getView().removeEventListener("mousedown",e),o.getView().removeEventListener("touchstart",e))};setTimeout(function(){l.focus(),o.mp(k),p&&l.addEventListener("keydown",function(e){p(e,a)}),(y||_)&&l.addEventListener("keyup",function(e){y&&p(e,a),_&&y(l.value,a)}),o.getView().addEventListener("mousedown",T),o.getView().addEventListener("touchstart",T)},1)}}},{key:"onDrag",value:function(e,t,a,o,r,i){}}]),t}(),y=function(e){function I(){return l(this,I),h(this,(I.__proto__||Object.getPrototypeOf(I)).call(this))}return u(I,v),a(I,[{key:"onEnter",value:function(e,t,a,o,r,i){t.__defaultCursor=a.getView().style.cursor,t.a(ie.DISABLED)?a.setCursor("not-allowed"):a.setCursor("text")}},{key:"onLeave",value:function(e,t,a,o,r,i){a.setCursor(t.__defaultCursor||"default")}},{key:"onDown",value:function(e,a,o,t,r,i){if(O(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"onDown",this).call(this),!a.a(ie.DISABLED)&&!a.a(ie.EDITING)){var n=a.getAnchorRect(),l=a.a(ie.FONT),u=Me(),h=a.a(ie.TEXT_COLOR)||re.textColor,s=u.style,d=a.a(ie.VALUE),c=a.a(ie.PLACEHOLDER),g=a.a(ie.TEXT_ALIGN),f=a.a(ie.MAX_LENGTH),v=a.a(ie.INPUT_TYPE),p=a.a(ie.ON_KEYDOWN),y=a.a(ie.ON_KEYUP),_=a.a(ie.ON_CHANGE),D=Ne(a.a(ie.PADDING)),b=oe(D,4),w=b[0],V=b[1],m=b[2],E=b[3];v&&(u.type=v),s.color=h,s.font=l,s.paddingTop=w+"px",s.paddingRight=V+"px",s.paddingBottom=m+"px",s.paddingLeft=2+E+"px",s.lineHeight=n.height+"px",s.textAlign=g,u.value=d||"",u.placeholder=c||"",u.spellcheck=!1,f&&u.setAttribute("maxlength",f),o.appendHTML(u);var C=tt(o,a,this);C&&Ge(o,u,C),a.a(ie.EDITING,!0);var k=function(e){Ge(o,u,C)},T=function e(t){o.getDataAt(t)!==a&&(t.preventDefault(),a.a(ie.VALUE,u.value),o.getView().removeChild(u),a.a(ie.EDITING,!1),o.ump(k),o.getView().removeEventListener("mousedown",e),o.getView().removeEventListener("touchstart",e))};setTimeout(function(){u.focus(),o.mp(k),p&&u.addEventListener("keydown",function(e){p(e,a)}),(y||_)&&u.addEventListener("keyup",function(e){y&&y(e,a),_&&_(u.value,a)}),o.getView().addEventListener("mousedown",T),o.getView().addEventListener("touchstart",T)},1)}}},{key:"onDrag",value:function(e,t,a,o,r,i){}}]),I}(),D=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,v),a(t,[{key:"onDown",value:function(e,t,a,o,r,i){t.a(ie.DISABLED)||t.a(ie.PRESSED,!0)}},{key:"onEnter",value:function(e,t,a,o,r,i){a.getDataUI(t).defaultCursor=a.getView().style.cursor,t.a(ie.DISABLED)?a.setCursor("not-allowed"):a.setCursor("pointer"),t.a(ie.DISABLED)||t.a(ie.HOVER,!0)}},{key:"onLeave",value:function(e,t,a,o,r,i){var n=a.getDataUI(t);a.setCursor(n.defaultCursor||"default"),t.a(ie.HOVER,!1)}}]),t}(),b=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,D),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){t.a(ie.DISABLED)||(t.a(ie.PRESSED,!1),t.a(ie.ON_CLICK)&&0<o.x&&o.x<r&&0<o.y&&o.y<i&&t.a(ie.ON_CLICK)(e,t,a))}}]),t}(),V=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,D),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){if(!t.a(ie.DISABLED)){t.a(ie.PRESSED,!1);var n=ie.CHECKED,l=ie.FORM_ITEM_GROUP,u=ie.ON_CHANGE,h=ie.VALUE;if(!t.a(n)&&0<o.x&&o.x<r&&0<o.y&&o.y<i){var s=t.a(n);if(a&&a.dm()&&!s&&t.a(l)){var d=t.a(l);a.dm().each(function(e){d===e.a(l)&&e.a(n,!1)})}t.a(n,!0),t.a(u)&&t.a(u)(void 0===t.a(h)||t.a(h),t,a)}}}}]),t}(),m=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,D),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){if(!t.a(ie.DISABLED)){t.a(ie.PRESSED,!1);var n=ie.CHECKED,l=ie.FORM_ITEM_GROUP,u=ie.ON_CHANGE,h=ie.VALUE;if(0<o.x&&o.x<r&&0<o.y&&o.y<i){var s=t.a(n);if(t.a(n,!s),t.a(u)){var d=t.a(l);if(d){var c=[];a.dm().each(function(e){d===e.a(l)&&e.a(n)&&c.push(e.a(h))}),t.a(u)(c)}else t.a(u)(!s,t,a)}}}}}]),t}(),E=function(){function o(t,e,a){l(this,o),this.data=t,this.graph=e,this.valueType=a,this._documentClickHandler=this.documentClickHandler.bind(this),ht.Default.addMethod(t,{isInstant:function(){return this.s("instant")},setInstant:function(e){t.s("instant",e)}})}return a(o,[{key:"init",value:function(){var e=this.data,t=this.graph,a=t.getZoom(),o=t.tx(),r=t.ty(),i=this.value,n=new this.dropDownClazz,l=n._dropDownView=n.initDropDownView(e,this.getDatas(),i);n.getDropDownView=function(){return l},l.on("d:click",function(e){e.stopPropagation()}),l.on("d:mousedown",function(e){e.stopPropagation()}),l.on("d:mouseup",function(e){e.stopPropagation()}),this._dropDown=n,this._dropDownView=l,this.onInit(n,l);var u=e.getWidth()*a,h=e.getHeight()*a;this.prepareLayoutDropDown(n,l,{left:e.getX()*a+o-u*e.getAnchor().x,top:e.getY()*a+r-h*e.getAnchor().y,width:u,height:h}),ht.Default.appendToScreen(l.getView()),n.addValueChangeListener(this.handleDropDownValueChange,this),n.addDropDownListener(this.handleDropDownChange,this),this.registerCloseEvent(this._documentClickHandler),n.afterOpen(i),l.iv(!0)}},{key:"onInit",value:function(e,t){}},{key:"getDatas",value:function(){return null}},{key:"prepareLayoutDropDown",value:function(e,t,a){var o=e.getWidth(),r=e.getHeight(),i=ht.Default.getWindowInfo(),n=a.left+i.left,l=a.top+a.height+i.top;n+o>i.left+i.width&&(n=i.left+i.width-o),l+r>i.top+i.height&&(l-=a.height+r)<i.top&&(l=i.top),t.setX(Math.max(0,n)),t.setY(l),t.setWidth(o),t.setHeight(r)}},{key:"registerCloseEvent",value:function(e){ht.Default.isTouchable?document.addEventListener("touchstart",e):document.addEventListener("mousedown",e)}},{key:"unregisterCloseEvent",value:function(e){ht.Default.isTouchable?document.removeEventListener("touchstart",e):document.removeEventListener("mousedown",e)}},{key:"_clearDropDown",value:function(){this._dropDown=this._dropDownView=null,this.data.a(ie.EDITING,!1)}},{key:"documentClickHandler",value:function(e){var t=this.data,a=this.graph;if(ht.Default.isLeftButton(e)){var o=this._dropDown;if(this._dropDownView){var r=t.getWidth(),i=t.getHeight(),n=a.tx(),l=a.ty(),u=a.getZoom(),h={x:t.getX()*u+n-r*t.getAnchor().x,y:t.getY()*u+l-i*t.getAnchor().y,width:r,height:i};ht.Default.containsPoint(h,ht.Default.getClientPoint(e))||o.isClickOnDropDownView(e)||this.close()}}}},{key:"close",value:function(){this._dropDown&&(this._dropDown.cancel(),this.data.a(ie.EDITING,!1),delete this._dropDown,delete this._dropDownView)}},{key:"handleDropDownValueChange",value:function(e){this.value=e.value}},{key:"open",value:function(){this.isOpened()||(this.init(),this.data.a(ie.EDITING,!0))}},{key:"isOpened",value:function(){return!!this._dropDown}},{key:"handleDropDownChange",value:function(e){this.data;var t=this,a=t._dropDown,o=t._dropDownView;if(a){if(a.beforeClose(),"stop"===e.kind){var r=a.getDropDownValue();void 0!==r&&(this.value=r)}t._clearDropDown(),ht.Default.removeHTML(o.getView()),a.removeValueChangeListener(t.handleDropDownValueChange,t),this.unregisterCloseEvent(this._documentClickHandler),a.afterClose()}}},{key:"value",get:function(){var e=this.data,t=this.valueType.split("@"),a=oe(t,2),o=a[0],r=a[1];if("a"===o)return e.a(r);if("s"===o)return e.s(r);if("p"===o){var i=ht.Default.getter(r);if(e[i])return e[i]()}return null},set:function(e){var t=this.data,a=this.valueType,o=this.graph,r=a.split("@"),i=oe(r,2),n=i[0],l=i[1],u=t.a(ie.ON_CHANGE),h=this.value;if("a"===n)t.a(l,e);else if("s"===n)t.s(l,e);else if("p"===n){var s=ht.Default.setter(l);t[s]&&t[s](e)}u&&u(h,e,t,o)}}]),o}(),C=function(e){function r(e,t,a){l(this,r);var o=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,a));return o.dropDownClazz=ht.ui.ColorDropDown,o}return u(r,E),r}(),k=function(e,t,a){var o=e.a(ie.DROP_DOWN);o||(o=new C(e,t,a),e.a(ie.DROP_DOWN,o)),o.open()},T=function(e){function r(e,t,a){l(this,r);var o=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,a));return o.dropDownClazz=ht.ui.DateTimeDropDown,o}return u(r,E),a(r,[{key:"onInit",value:function(e,t){var a=this.data.a(ie.SHOW_TIME);t.getChildren().get(0).setType(a?"datetime":"date")}}]),r}(),I=function(e,t,a){var o=e.a(ie.DROP_DOWN);o||(e.getFormat=function(){return e.a(ie.FORMAT)},o=new T(e,t,a),e.a(ie.DROP_DOWN,o)),o.open()},x=(function(e){function r(e,t,a){l(this,r);var o=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,a));return o.dropDownClazz=ht.ui.ListDropDown,o}u(r,E),a(r,[{key:"getDatas",value:function(){return[{id:void 0,label:""},{id:"0",label:"Female"},{id:"1",label:"Male"}]}}])}(),function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,D),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){t.a(ie.DISABLED)||(t.a(ie.PRESSED,!1),0<o.x&&o.x<r&&0<o.y&&o.y<i&&k(t,a,"a@ht.value"))}}]),t}()),A=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,D),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){t.a(ie.DISABLED)||(t.a(ie.PRESSED,!1),0<o.x&&o.x<r&&0<o.y&&o.y<i&&I(t,a,"a@ht.value"))}}]),t}(),L=function(e){function t(e){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),a(t,[{key:"handle_mousedown",value:function(e){this.handle_touchstart(e)}},{key:"handle_touchstart",value:function(e){e.stopPropagation();var t=this.gv,a=t.getDataAt(e);a&&t.sm().ss(a)}},{key:"handle_mousemove",value:function(e){e.stopPropagation();var t=this.gv,a=t._hoverData,o=t.getDataAt(e);o!==a&&(t._hoverData=o&&t.sm().contains(o)?null:o,t.redraw())}},{key:"handle_mouseleave",value:function(e){e.stopPropagation();var t=this.gv;t._hoverData&&(t._hoverData=null,t.redraw())}},{key:"handle_mouseup",value:function(e){this.handle_touchend(e)}},{key:"handle_touchend",value:function(e){e.stopPropagation()}}]),t}(ht.graph.Interactor),R={hoverDarker:5,activeDarker:11,baseColor:"#3399ff",baseColor2:"#737373",hoverBackground:"#eeeeee",emptyColor:"#ffffff",fontSize:12,fontFamily:"arial, sans-serif",font:"12px arial sans-serif",disabledColor:"#ebebeb",disabledBackground:"#fafafa",inputTextColor:"#111111",placeholderColor:"#737373"},P=function(e){function o(e){l(this,o);var t=h(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));t.setInteractors([new ht.graph.ScrollBarInteractor(t),new L(t),new ht.graph.DefaultInteractor(t),new ht.graph.TouchInteractor(t,{editable:!1})]),t.addBottomPainter(t.drawBottomPainter.bind(t)),t._nodes=[];var a=t.getView().style;return a.transition="all 0.2s",a.transitionOrigin="0 0",t}return u(o,e),a(o,[{key:"adjustTranslateX",value:function(){return 0}},{key:"isMovable",value:function(){return!1}},{key:"adjustZoom",value:function(){return 1}},{key:"adjustTranslateY",value:function(e){this.getContentRect();var t=this.getHeight()-this.dm().size()*this._rowHeight;return 0<=e||0<=t?0:t<e?e:t}},{key:"handleScroll",value:function(e){var t=He?-e.detail:e.wheelDelta/40;(He||e.wheelDelta!==e.wheelDeltaX)&&this.translate(0,t)}},{key:"onPropertyChanged",value:function(e){O(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"onPropertyChanged",this).call(this,e);var t=e.property;"dataModel"!==t&&"fileSize"!==t||this.doLayoutLater()}},{key:"doLayoutLater",value:function(){this._doLayoutLater||(this._doLayoutLater=!0,ht.Default.callLater(this.doLayout,this))}},{key:"onValidated",value:function(){this._lastWidth!==this.getWidth()&&this.doLayoutLater()}},{key:"isVisible",value:function(e){return!0}},{key:"doLayout",value:function(){var t=this;this._doLayoutLater=!1;this._lastWidth=this.getWidth();var a=this._iconHeight,o=this._iconWidth,r=this._rowHeight,i=this._nodes=[];this.dm().getDatas().each(function(e){t.isVisible(e)&&i.push(e)}),this._lastHeight=this.getHeight();var n=8+.5*o,l=.5*r;i.forEach(function(e,t){e.setSize(o,a),e.p(n,l),l+=r})}},{key:"drawBottomPainter",value:function(t){var a=this,o=this._rowHeight,r=this.getWidth(),i=this._hoverData;this.dm().toDatas(this.isVisible,this).each(function(e){a.isSelected(e)?(t.beginPath(),t.rect(0,e.p().y-o/2,r,o),t.fillStyle=a.getActiveColor()||R.baseColor,t.fill()):e===i&&(t.beginPath(),t.rect(0,e.p().y-o/2,r,o),t.fillStyle=a.getHoverBackground()||R.hoverBackground,t.fill())})}},{key:"getDataAt",value:function(e){var t=Math.floor(this.lp(e).y/this._rowHeight);return this._nodes[t]}},{key:"handleSelectionChange",value:function(e){O(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"handleSelectionChange",this).call(this,e),this.redraw()}},{key:"getSelectWidth",value:function(){return 0}}]),o}(ht.graph.GraphView);Ke(P,{ms_ac:["rowHeight","iconWidth","iconHeight","activeColor","hoverBackground"],_rowHeight:26,_iconWidth:20,_iconHeight:20});var H=function(e){function r(e,t){l(this,r);var a=h(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));a.setSelectionMode(n),a._master=e,a._masterGraph=t,a._transition=!1,a._documentClickHandler=a.documentClickHandler.bind(a),a._previousValue=null,a.dm().setAutoAdjustIndex(!1);var o=a.getView().style;return o.height=0,o.boxShadow="rgba(0, 0, 0, 0.3) 0px 8px 22px",Ue(o,"transition","all 0.3s esse-in"),a.getView().addEventListener("click",function(e){a.handleSelectData(e)}),a.sm().ms(function(e){a.dm().each(function(e){e instanceof ht.Text&&e.s("text.color",a.getLabelColor(e))})}),a.mp(function(e){"background"===e.property&&(o.background=e.newValue)}),a._initStyleByMaster(),a}return u(r,P),a(r,[{key:"_initStyleByMaster",value:function(){var e=this._master;this.setIconHeight(e.a(ie.DROP_ICON_WIDTH)),this.setIconWidth(e.a(ie.DROP_ICON_HEIGHT)),this.setRowHeight(e.a(ie.DROP_ROW_HEIGHT)),this.setDropWidth(e.a(ie.DROP_WIDTH)),this.setBackground(e.a(ie.DROP_BACKGROUND)),this.setHoverBackground(e.a(ie.DROP_HOVER_BACKGROUND)),this.setActiveColor(e.a(ie.DROP_ACTIVE_BACKGOUND)),this.setDropLabelColor(e.a(ie.DROP_LABEL_COLOR)),this.setDropActiveLabelColor(e.a(ie.DROP_ACTIVE_LABEL_COLOR)),this.setMaxHeight(e.a(ie.DROP_MAX_HEIGHT))}},{key:"handleSelectData",value:function(e){var t=this._master,a=t.a(ie.ON_CHANGE),o=t.a(ie.DATA_SOURCE);o&&0!==o.length&&(t.a(ie.VALUE,this.getValue()),t.a(ie.LABEL,this.__getLabel()),this.sm().ld()&&t.a(ie.ICON,this.sm().ld().a("icon")),a&&a(this._previousValue,this.getValue(),t,this._masterGraph),this.close())}},{key:"setSelectionMode",value:function(e){i!==e&&n!==e||this.sm().setSelectionMode(e)}},{key:"getNodeValue",value:function(e){return e.a("value")||e.s("label")||e.s("text")}},{key:"getNodeLabel",value:function(e){return e.s("label")||e.s("text")||e.a("value")}},{key:"setData",value:function(e){var a=this,o=this.dm();o.clear(),e&&e.length&&(e.forEach(function(e){var t;e.icon?((t=new ht.Node).setImage(e.icon),t.s({pixelPerfect:!1,"image.stretch":"uniform",label:e.label,"label.position":20,"label.offset.x":4})):(t=new ht.Text).s({text:e.label,"text.color":a.getLabelColor(t)}),t.a(e),o.add(t)}),this.setDropHeight(Math.min(this.getMaxHeight(),e.length*this.getRowHeight())))}},{key:"getValue",value:function(){var t=this,e=this.sm(),a=e.getSelection(),o=e.getSelectionMode();if(n===o)return 0===a.size()?null:this.getNodeValue(a.get(0));if(i===o){var r=[];return a.each(function(e){r.push(t.getNodeValue(e))}),r}return null}},{key:"__getLabel",value:function(){var t=this,e=this.sm(),a=e.getSelection(),o=e.getSelectionMode();if(n===o)return 0===a.size()?null:this.getNodeLabel(a.get(0));if(i===o){var r=[];return a.each(function(e){r.push(t.getNodeLabel(e))}),r}return null}},{key:"toggle",value:function(){this._transition||(this._opened?this.close():this.open())}},{key:"__scrollToIndex",value:function(e){this.dm().getDatas(),this.sm();var t=this.getMaxHeight(),a=this.getRowHeight();t<e*a?this.ty(t-(e+1)*a):this.ty(0)}},{key:"open",value:function(){var a=this,e=this._master,t=(this._masterGraph,this.getView().style),o=this.getDropWidth(),r=this.getDropHeight(),i=e.a(ie.VALUE);this.sm().cs(),i?"string"==typeof i?this.dm().each(function(e,t){e.a("value")===i&&(a.sm().ss(e),a.__scrollToIndex(t))}):i.length&&i.forEach(function(t){a.dm().each(function(e){e.a("value")===t&&a.sm().as(e)})}):this.ty(0),this._previousValue=i,e.a(ie.EDITING,!0),this.layoutByMaster(),this.setWidth(o),this.setHeight(r),Ue(t,"transform","scaleY(0)"),document.body.appendChild(this.getView()),this._transition=!0,this.registerCloseEvent(this._documentClickHandler),this.doLayout(),ht.Default.callLater(function(){Ue(t,"transform","scaleY(1)"),setTimeout(function(){a.redraw(),a.setOpened(!0),a._transition=!1},300)})}},{key:"layoutByMaster",value:function(){var e=ze(this._master,this._masterGraph),t=ht.Default.getWindowInfo(),a=this.getView().style,o=this.getDropWidth(),r=this.getDropHeight(),i=Math.max(0,e.x),n=e.y+e.height,l="50% 0";n+r>t.height&&n-e.height>r&&(n=n-r-e.height,l="50% 100%"),i+o>t.width&&(i=t.width-o),a.left=i+"px",a.top=n+"px",Ue(a,"transformOrigin",l)}},{key:"onOpen",value:function(){}},{key:"close",value:function(){var e=this;if(!this._transition){var t=this.getView(),a=t.style;this._master.a(ie.EDITING,!1),this._transition=!0,this.unRegisterCloseEvent(this._documentClickHandler),Ue(a,"transform","scaleY(0)"),setTimeout(function(){document.body.removeChild(t),e._transition=!1,e.setOpened(!1)},301)}}},{key:"registerCloseEvent",value:function(e){ht.Default.isTouchable?document.addEventListener("touchstart",e):document.addEventListener("mousedown",e)}},{key:"unRegisterCloseEvent",value:function(e){ht.Default.isTouchable?document.removeEventListener("touchstart",e):document.removeEventListener("mousedown",e)}},{key:"documentClickHandler",value:function(e){var t=ze(this._master,this._masterGraph);ht.Default.containsPoint(t,ht.Default.getClientPoint(e))||this.close()}},{key:"getLabelColor",value:function(e){return this.sm().co(e)?this.getDropActiveLabelColor():this.getDropLabelColor()}}]),r}();Ke(H,{ms_ac:["background","dropWidth","dropHeight","maxHeight","opened","dropLabelFont","dropLabelColor","dropActiveLabelColor"],_background:R.emptyColor,_dropWidth:200,_dropHeight:100,_maxHeight:400,_opened:!1,_dropLabelColor:R.inputTextColor});var B=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,D),a(t,[{key:"onUp",value:function(e,t,a,o,r,i){var n,l,u;t.a(ie.DISABLED)||(t.a(ie.PRESSED,!1),0<o.x&&o.x<r&&0<o.y&&o.y<i&&(l=a,(u=(n=t).__dropDown)||(u=new H(n,l),n.__dropDown=u),u.isOpened()||u.setData(n.a(ie.DATA_SOURCE)),u.toggle()))}},{key:"onDrag",value:function(e,t,a,o,r,i){var n=t.__dropDown;n&&n._opened&&n.layoutByMaster()}}]),t}(),N=Math.max,W=Math.min,Ie=ht.Default.containsPoint,Oe=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,v),a(t,[{key:"onBeginDrag",value:function(e,t,a,o,r,i){var n=a.getDataUI(t).interactiveInfo;if(n){var l=n.minX,u=n.minY,h=n.scrollBarX,s=n.scrollBarY,d=n.scaleX,c=n.scaleY;if(h&&Ie(et(h),o))this._dragInfo={downPoint:o,startX:t.a(ie.TRANSLATE_X),scaleX:d,minX:l,axis:"x"};else if(s&&Ie(et(s),o))this._dragInfo={downPoint:o,startY:t.a(ie.TRANSLATE_Y),scaleY:c,minY:u,axis:"y"};else{var g=t.a(ie.SHOW_HEAD),f=t.a(ie.HEAD_HEIGHT);if(Ie({x:0,y:g?f:0,width:r,height:g?i-f:i},o)&&(h||s)){var v=this._dragInfo={downPoint:o,isPan:!0};this._dragInfo={downPoint:o,startX:t.a(ie.TRANSLATE_X),startY:t.a(ie.TRANSLATE_Y),scaleX:d,minX:l,scaleY:c,minY:u,isPan:!0},h&&(v.startX=t.a(ie.TRANSLATE_X),v.scaleX=d,v.minX=l),s&&(v.startY=t.a(ie.TRANSLATE_Y),v.scaleY=c,v.minY=u)}}t.a(ie.SCROLL_BAR_VISIBLE,!!this._dragInfo)}}},{key:"onDrag",value:function(e,t,a,o,r,i){if(this._dragInfo){var n=this._dragInfo,l=n.axis,u=n.minX,h=n.minY,s=n.downPoint,d=n.startX,c=n.startY,g=n.scaleX,f=n.scaleY,v=n.isPan;if("x"===l){var p=d+(s.x-o.x)/g;p=W(0,p),p=N(u,p),t.a(ie.TRANSLATE_X,p)}else if("y"===l){var y=c+(s.y-o.y)/f;y=W(0,y),y=N(h,y),t.a(ie.TRANSLATE_Y,y)}else if(v){if(void 0!==d){var _=d+(o.x-s.x);_=W(0,_),_=N(u,_),t.a(ie.TRANSLATE_X,_)}if(void 0!==c){var D=c+(o.y-s.y);D=W(0,D),D=N(h,D),t.a(ie.TRANSLATE_Y,D)}}}}},{key:"onEndDrag",value:function(e,t,a,o,r,i){this._dragInfo=null,this.addHideBarTimer(t)}},{key:"onScroll",value:function(e,t,a,o,r,i){var n=a.getDataUI(t);if(n&&n.interactiveInfo){var l=n.interactiveInfo,u=l.scrollBarX,h=l.scrollBarY,s=l.minX,d=l.minY;if(h){oe(h,4);var c=t.a(ie.TRANSLATE_Y)+e.scrollDelta;c=W(0,c),c=N(d,c),t.a(ie.TRANSLATE_Y,c)}else if(u){oe(u,4);var g=t.a(ie.TRANSLATE_X)+e.scrollDelta;g=W(0,g),g=N(s,g),t.a(ie.TRANSLATE_X,g)}var f=t.a(ie.AUTO_HIDE_SCROLL_BAR);(u||h)&&f&&(t.a(ie.SCROLL_BAR_VISIBLE,!0),this.addHideBarTimer(t))}}},{key:"addHideBarTimer",value:function(e){var t=this;this._hideBarTimer&&(clearTimeout(this._hideBarTimer),this._hideBarTimer=null),this._hideBarTimer=setTimeout(function(){t._dragInfo||e.a(ie.SCROLL_BAR_VISIBLE,!1)},200)}}]),t}(),xe=function(e){function t(){return l(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return u(t,Oe),a(t,[{key:"onDown",value:function(e,t,a,o,r,i){var n=t.a(ie.HOVER_INDEX);if(null!=n){var l=t.a(ie.DATA_SOURCE)||[],u=t.a(ie.ON_SELECT_ROW);l&&l[n]&&(t.a(ie.SELECT_INDEX,n),u&&u(l[n],t,a))}}},{key:"onMove",value:function(e,t,a,o,r,i){var n=t.a(ie.ROW_HEIGHT),l=t.a(ie.HEAD_HEIGHT),u=t.a(ie.SHOW_HEAD),h=t.a(ie.TRANSLATE_Y)||0,s=Math.floor((o.y-h-(u?l:0))/n);0<=s?t.a(ie.HOVER_INDEX,s):t.a(ie.HOVER_INDEX,null)}},{key:"onLeave",value:function(e,t,a,o,r,i){t.a(ie.HOVER_INDEX,null)}}]),t}(),Ae=ht.Default.setImage;Ae("ht.vector.date",{width:16,height:16,comps:[{type:"roundRect",borderColor:"#ffffff",cornerRadius:1,rect:[1.5,6.54942,12.94,8]},{type:"shape",borderWidth:1,borderColor:"#ffffff",borderCap:"round",closePath:!0,points:[1.5,2.4523,14.44,2.4523,14.44,2.4523,14.44,2.4523,14.44,14.54942,14.44,14.54942,14.44,14.54942,1.5,14.54942,1.5,14.54942,1.5,14.54942,1.5,2.4523,1.5,2.4523,1.5,2.4523,1.5,2.4523],segments:[1,2,3,2,3,2,3,2,3,2]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[4.46,1,4.46,4]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[11.5,1,11.5,4]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[3.52013,9.50677,7.00013,9.50677,9.00013,9.50677,12.50756,9.50677],segments:[1,2,1,2]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[3.52,12.52535,12.50756,12.52535]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[3.52013,6.54942,7.00013,6.54942,9.00013,6.54942,12.50756,6.54942],segments:[1,2,1,2]}]}),Ae("ht.vector.dropDownIcon",{width:18,height:10,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",points:[1,1,9,9,17,1]}]});var Le,Re,Pe,Se={comp:{button:function(e,t,a,o,r){var i=a.getValue("text"),n=a.getValue("disabled"),l=a.getValue("font"),u=a.getValue("icon"),h=a.getValue("iconPosition"),s=a.getValue("iconWidth"),d=a.getValue("iconHeight"),c=a.getValue("iconGap"),g=a.getValue("iconColor"),f=a.getValue("hoverIconColor"),v=a.getValue("activeIconColor"),p=a.getValue("textColor"),y=a.getValue("hoverTextColor"),_=a.getValue("activeTextColor"),D=a.getValue("disabledTextColor"),b=a.getValue("borderWidth"),w=a.getValue("borderColor"),V=a.getValue("hoverBorderColor"),m=a.getValue("activeBorderColor"),E=a.getValue("disabledBorderColor"),C=a.getValue("background"),k=a.getValue("hoverBackground"),T=a.getValue("activeBackground"),I=a.getValue("disabledBackground"),O=a.getValue("borderRadius"),x=We(Z),A=(oe(x,4),Ne(O)),L=oe(A,4),R=L[0],P=L[1],S=L[2],H=L[3],B=t.x,N=t.y,W=t.width,M=t.height;if(n?(C=I,w=E,p=D,b||(b=1)):(C=je(o,C,k,T,!0),w=je(o,w,V,m,!0),g=je(o,g,f,v,!1,!0),p=je(o,p,y,_,!0)),e.fillStyle=C,e.beginPath(),ht.Default.drawRoundRect(e,B,N,W,M,R,P,H,S),e.closePath(),e.fill(),b&&w&&(e.strokeStyle=w,e.lineWidth=b,e.stroke()),!u&&i)j(e,i,l,p,B,N,W,M,"center","middle");else if(u&&!i)K(e,z(u),"uniform",B+.5*(W-s),N+.5*(M-d),s,d,o,r,g);else if(u&&i){var G=Be(l,i),U=void 0,X=void 0;if(ne===h||le===h){var Y=N+.5*(M-d-G.height-c);U={x:B,height:G.height,width:W},X={x:B+.5*(W-s),width:s,height:d},ne===h?(U.y=Y+d+c,X.y=Y):le===h&&(U.y=Y,X.y=Y+G.height+c)}else{var F=B+.5*(W-s-G.width-c);U={width:G.width,y:N,height:M},X={y:.5*(M-d),width:s,height:d},ue===h?(U.x=F,X.x=F+G.width+c):(U.x=F+s+c,X.x=F)}j(e,i,l,p,U.x,U.y,U.width,U.height,"center","middle"),K(e,z(u),"uniform",X.x,X.y,X.width,X.height,o,r,g)}},input:function(e,t,a,o,r){var i=a.getValue("value"),n=a.getValue("placeholder"),l=a.getValue("disabled"),u=a.getValue("borderWidth"),h=a.getValue("borderColor"),s=a.getValue("disabledBorderColor")||h,d=a.getValue("focusBorderColor")||h,c=a.getValue("borderRadius"),g=a.getValue("padding"),f=a.getValue("background"),v=a.getValue("disabledBackground")||f,p=a.getValue("focusBackground")||f,y=a.getValue("icon"),_=a.getValue("iconWidth"),D=a.getValue("iconHeight"),b=a.getValue("iconAlign"),w=a.getValue("font"),V=a.getValue("textAlign"),m=a.getValue("textColor"),E=a.getValue("disabledTextColor"),C=o&&o.a(ie.EDITING),k=Ne(g),T=oe(k,4),I=T[0],O=T[1],x=T[2],A=T[3],L=Ne(c),R=oe(L,4),P=R[0],S=R[1],H=R[2],B=R[3],N=t.x,W=t.y,M=t.width,G=t.height,U=void 0;if(o?l?(U=v,h=s,m=E,u||(u=1)):C?(U=p,h=d):U=f:U=f,e.beginPath(),ht.Default.drawRoundRect(e,N,W,M,G,P,S,B,H),e.closePath(),U&&(e.fillStyle=U,e.fill()),(u&&h||C&&u&&d)&&(e.strokeStyle=C?d:h,e.lineWidth=u,e.stroke()),!C){var X=!i&&n,Y=i||n||"",F=Math.max(0,M-A-O),j=Math.max(0,G-I-x),K=N+A,z=W+I;i||!o||o.a(ie.DISABLED)||(m=re.placeholderColor),e.save(),e.beginPath(),e.rect(K,z,F,j),e.clip(),!X&&o&&"password"===o.a(ie.INPUT_TYPE)&&(Y=function(){for(var e="",t=0;t<Y.length;t++)e+="â€¢";return e}()),$(e,Y,w,m,K,z,F,j,V,"middle"),e.restore()}if(y){var Z=void 0;Z="left"===b?N:"center"===b?N+.5*(M-_):N+M-_,q(e,J(y),"uniform",Z,.5*(G-D),_,D,o,r)}},textarea:function(t,e,a,o,r){var i=a.getValue("value"),n=a.getValue("placeholder"),l=a.getValue("disabled"),u=a.getValue("borderWidth"),h=a.getValue("borderColor"),s=a.getValue("disabledBorderColor"),d=a.getValue("focusBorderColor"),c=a.getValue("borderRadius"),g=a.getValue("padding"),f=a.getValue("background"),v=a.getValue("disabledBackground")||f,p=a.getValue("focusBackground")||f,y=a.getValue("textAlign"),_=a.getValue("textColor"),D=a.getValue("disabledTextColor"),b=a.getValue("lineHeight"),w=a.getValue("font"),V=a.getValue("wordBreak"),m=o&&o.a(ie.EDITING),E=Ne(g),C=oe(E,4),k=C[0],T=C[1],I=C[2],O=C[3],x=Ne(c),A=oe(x,4),L=A[0],R=A[1],P=A[2],S=A[3],H=e.x,B=e.y,N=e.width,W=e.height,M=void 0;if(o?l?(M=v,h=s,_=D,u||(u=1)):m?(M=p,h=d):M=f:M=f,t.beginPath(),ht.Default.drawRoundRect(t,H,B,N,W,L,R,S,P),t.closePath(),M&&(t.fillStyle=M,t.fill()),(u&&h||m&&u&&d)&&(t.strokeStyle=m?d:h,t.lineWidth=u,t.stroke()),!m){var G=i||n||"",U=Math.max(0,N-O-T),X=Math.max(0,W-k-I);i||(_=re.placeholderColor),t.save(),t.beginPath(),t.rect(H+O,B+k,U,X),t.clip();var Y=Ye(G,w,U,V),F=B+k;Y.forEach(function(e){B+W<F||(Q(t,e,w,_,H+O,F,U,b,y,"middle"),F+=b)}),t.restore()}},radio:function(e,t,a,o,r){var i=a.getValue("disabled"),n=a.getValue("checked"),l=a.getValue("normalColor"),u=a.getValue("background"),h=a.getValue("activeColor"),s=a.getValue("disabledColor"),d=a.getValue("disabledBackground"),c=n?h:l,g=t.x,f=t.y,v=t.width,p=t.height,y=Math.min(v,p);o&&(i?(c=s,u=d):o.a(ie.PRESSED)?n?c=ht.Default.darker(c,re.activeDarker):u=ht.Default.darker(u,re.activeDarker):o.a(ie.HOVER)&&(n?c=ht.Default.darker(c,re.hoverDarker):u=ht.Default.darker(u,re.hoverDarker))),u&&(e.beginPath(),e.fillStyle=u,e.arc(g+.5*v,f+.5*p,.5*y,0,2*Math.PI),e.fill()),e.beginPath(),e.strokeStyle=c,e.lineWidth=1.5,e.arc(g+.5*v,f+.5*p,.5*y,0,2*Math.PI),e.stroke(),n&&(e.beginPath(),e.fillStyle=c,e.arc(g+.5*v,f+.5*p,.25*y,0,2*Math.PI),e.fill()),o&&!o.a(ie.INPUT_TYPE)&&o.a(ie.INPUT_TYPE,_)},checkbox:function(e,t,a,o,r){var i=a.getValue("checked"),n=a.getValue("disabled"),l=a.getValue("borderColor"),u=a.getValue("activeBorderColor"),h=a.getValue("disabledBorderColor"),s=a.getValue("background"),d=a.getValue("activeBackground"),c=a.getValue("disabledBackground"),g=a.getValue("borderRadius"),f=a.getValue("iconColor"),v=a.getValue("disabledIconColor"),p=t.x,y=t.y,_=t.width,D=t.height,b=Math.min(_,D);s=i?d:s,n?(l=h,f=v,s=c):s=je(o,s,null,null,!0),i&&!n&&(l=u),D<_?p+=.5*(_-D):_<D&&(y+=.5*(D-_)),e.beginPath(),ht.Default.drawRoundRect(e,p,y,b,b,g),e.closePath(),s&&(e.fillStyle=s,e.fill()),e.strokeStyle=l,e.lineWidth=1,e.stroke(),i&&(e.beginPath(),e.moveTo(p+.125*b,y+.5*b),e.lineTo(p+b*(3/8),y+.75*b),e.lineTo(p+.8125*b,y+.25*b),e.lineWidth=Math.max(1,b/16),e.lineCap="round",e.strokeStyle=f,e.stroke()),o&&!o.a(ie.INPUT_TYPE)&&o.a(ie.INPUT_TYPE,w)},colorPicker:function(e,t,a,o,r){var i=a.getValue("disabled"),n=a.getValue("borderWidth"),l=a.getValue("borderColor"),u=a.getValue("disabledBorderColor"),h=a.getValue("focusBorderColor"),s=a.getValue("borderRadius"),d=a.getValue("textColor"),c=a.getValue("value"),g=a.getValue("font"),f=a.getValue("fullMode"),v=a.getValue("showDropDownIcon"),p=a.getValue("dropDownIcon"),y=a.getValue("dropDownIconColor"),_=a.getValue("dropDownIconWidth"),D=a.getValue("dropDownIconHeight"),b=Ne(s),w=oe(b,4),V=w[0],m=w[1],E=w[2],C=w[3],k=t.x,T=t.y,I=t.width,O=t.height,x=k+I+5,A=T+O+5,L=!1,R=void 0;if(i?l=d=u:o&&o.a(ie.EDITING)&&h&&(l=h),e.save(),f){e.beginPath(),ht.Default.drawRoundRect(e,k,T,I,O,V,m,C,E),e.closePath(),e.clip();for(var P=T,S=0;P<A;P+=5,S++){L=S%2!=0;for(var H=k;H<x;H+=5)e.fillStyle=L?Y:X,e.fillRect(H,P,5,5),L=!L}}else{x=(R={x:k+4,y:T+4,width:1.66*(O-8),height:O-8}).x+R.width,A=R.y+R.height,e.beginPath(),e.rect(R.x,R.y,R.width,R.height),e.closePath(),e.clip();for(var B=R.y,N=0;B<A;B+=5,N++){L=N%2!=0;for(var W=R.x;W<x;W+=5)e.fillStyle=L?Y:X,e.fillRect(W,B,5,5),L=!L}}e.restore(),e.beginPath(),ht.Default.drawRoundRect(e,k,T,I,O,V,m,C,E),e.closePath(),c&&f?(e.fillStyle=c,e.fill()):c&&!f&&(e.fillStyle=c,e.fillRect(R.x,R.y,R.width,R.height),F.setColor(c),M(e,F,g,d,R.x+R.width+4,T,I-R.width-8,O,"left","middle")),n&&(e.lineWidth=n,e.strokeStyle=l,e.stroke()),v&&G(e,U(p||"ht.vector.dropDownIcon"),"uniform",k+I-8-_,T+.5*(O-D),_,D,o,r,y)},comboBox:function(e,t,a,o,r){var i=a.getValue("value"),n=a.getValue("placeholder"),l=a.getValue("dataSource"),u=a.getValue("disabled"),h=a.getValue("borderWidth"),s=a.getValue("borderColor"),d=a.getValue("disabledBorderColor"),c=a.getValue("focusBorderColor"),g=a.getValue("borderRadius"),f=a.getValue("padding"),v=a.getValue("background"),p=a.getValue("disabledBackground"),y=a.getValue("focusBackground")||v,_=a.getValue("icon"),D=a.getValue("iconWidth"),b=a.getValue("iconHeight"),w=a.getValue("iconAlign"),V=a.getValue("font"),m=a.getValue("textAlign"),E=a.getValue("textColor"),C=a.getValue("disabledTextColor"),k=a.getValue("dropDownIcon"),T=a.getValue("dropDownIconColor"),I=a.getValue("dropDownIconWidth"),O=a.getValue("dropDownIconHeight"),x=o&&o.a(ie.EDITING),A=Ne(f),L=oe(A,4),R=L[0],P=L[1],S=L[2],H=L[3],B=Ne(g),N=oe(B,4),W=N[0],M=N[1],G=N[2],U=N[3],X=t.x,Y=t.y,F=t.width,j=t.height,K=void 0;o?u?(K=p,s=d,E=C,h||(h=1)):x?(K=y,s=c):K=v:K=v,e.beginPath(),ht.Default.drawRoundRect(e,X,Y,F,j,W,M,U,G),e.closePath(),K&&(e.fillStyle=K,e.fill()),(h&&s||x&&h&&c)&&(e.strokeStyle=x?c:s,e.lineWidth=h,e.stroke());var z=null;if(i&&l)for(var Z=0,$=l.length;Z<$;Z++)if(l[Z].value===i){z=l[Z].label,_=l[Z].icon;break}z||(_=null);var q=z||n||"",J=Math.max(0,F-H-P),Q=Math.max(0,j-R-S),ee=X+H,te=Y+R;if(i||!o||o.a(ie.DISABLED)||(E=re.placeholderColor),e.save(),e.beginPath(),e.rect(ee,te,J,Q),e.clip(),ce(e,q,V,E,_?ee+D:ee,te,J,Q,m,"middle"),e.restore(),_){var ae=void 0;ae="left"===w?ee:"center"===w?X+.5*(F-D):X+F-D-P,ge(e,fe(_),"uniform",ae,.5*(j-b),D,b,o,r)}ge(e,fe(k||"ht.vector.dropDownIcon"),"uniform",X+F-8-I,Y+.5*(j-O),I,O,o,r,T)},gauge:function(e,t,a,o,r){var i=a.getValue("pointerRadius"),n=a.getValue("pointerColor"),l=a.getValue("value"),u=a.getValue("max"),h=a.getValue("showTick"),s=a.getValue("tickEvery"),d=a.getValue("tickColor"),c=a.getValue("tickWidth"),g=(a.getValue("tickRadius"),a.getValue("bigTickEvery")),f=a.getValue("bigTickColor"),v=a.getValue("bigTickWidth"),p=(a.getValue("bigTickRadius"),a.getValue("showLabel")),y=a.getValue("labelEvery"),_=a.getValue("labelColor"),D=a.getValue("labelFont"),b=a.getValue("labelRadius"),w=a.getValue("showShadow"),V=a.getValue("shadowBlur"),m=a.getValue("shadowColor"),E=a.getValue("shadowOffsetX"),C=a.getValue("shadowOffsetY");ye=a.getValue("clockwise"),_e=a.getValue("min"),ve=a.getValue("startAngle"),pe=a.getValue("endAngle"),te=Math.abs(u-_e),ae=Math.abs(pe-ve);var k=t.x,T=t.y,I=t.width,O=t.height,x=Math.min(I,O)/2,A=De(l,ye);if(e.save(),w&&(e.shadowColor=m,e.shadowBlur=V,e.shadowOffsetX=E,e.shadowOffsetY=C),e.translate(k+.5*I,T+.5*O),h){if(g){e.beginPath(),e.strokeStyle=f,e.lineWidth=v;for(var L=_e;L<=u;L+=g){var R=De(L,ye),P=x*Math.cos(R),S=x*Math.sin(R);e.moveTo(.84*P+k,.84*S+T),e.lineTo(P+k,S+T)}e.stroke()}if(s){e.beginPath(),e.strokeStyle=d,e.lineWidth=c;for(var H=_e;H<=u;H+=s){var B=De(H,ye),N=x*Math.cos(B),W=x*Math.sin(B);e.moveTo(.9*N+k,.9*W+T),e.lineTo(N+k,W+T)}e.stroke()}}if(p){b=ee(b,x),e.font=D,e.fillStyle=_,e.textAlign="center",e.textBaseline="middle";for(var M=_e;M<=u;M+=y){var G=De(M,ye),U=b*Math.cos(G),X=b*Math.sin(G);e.fillText(M,U,X)}}var Y=.05*(i=ee(i,x));e.rotate(A),e.beginPath(),e.moveTo(-1.5*Y,0),e.lineTo(0,-Y),e.lineTo(i,0),e.lineTo(0,Y),e.closePath(),e.fillStyle=n,e.fill(),e.restore()},table:function(d,e,t,c,g){var f=t.getValue("columns"),a=t.getValue("dataSource"),o=t.getValue("thBackground"),r=t.getValue("tdBackground"),i=t.getValue("thHeight"),v=t.getValue("tdHeight"),n=t.getValue("thColor"),p=t.getValue("tdColor"),l=t.getValue("thFont"),y=t.getValue("tdFont"),_=t.getValue("borderWidth"),u=t.getValue("borderColor"),h=t.getValue("columnLineColor"),D=t.getValue("columnLineWidth"),s=t.getValue("rowLineColor"),b=t.getValue("rowLineWidth"),w=t.getValue("showHeadRowLine"),V=t.getValue("cellPadding"),m=t.getValue("showHead"),E=t.getValue("hoverBackground"),C=t.getValue("hoverColor"),k=t.getValue("selectBackground"),T=t.getValue("selectColor"),I=t.getValue("translateY")||0,O=t.getValue("translateX")||0,x=t.getValue("scrollable"),A=t.getValue("autoHideScrollBar"),L=t.getValue("scrollBarColor"),R=t.getValue("scrollBarWidth"),P=t.getValue("scrollBarWidthAbsolute"),S=t.getValue("drawRow"),H=e.x,B=e.y,N=e.width,W=e.height,M=N-2*_,G=W-2*_;if(o&&m&&(d.fillStyle=o,d.fillRect(H,B+_,N,i)),r&&(d.fillStyle=r,d.fillRect(H,B+i*m+_,N,G-i*m)),f&&0<f.length){var U=f.length,X=Qe(f,M-D*(U-1)),Y=a.length;if(D){var F=_+O;d.beginPath();for(var j=0;j<U-1;j++)F+=X[j]+D/2,d.moveTo(F,B),d.lineTo(F,B+W),F+=D/2;d.strokeStyle=h,d.lineWidth=D,d.stroke()}var K=H+_+O;if(m)for(var z=0;z<U;z++){var Z=f[z],$=X[z]-2*V,q=Z.headColor||Z.color||n;"function"==typeof q&&(q=q(Z)),K+=V,d.save(),d.beginPath(),d.rect(K,B+_,$,i),d.clip(),Ee(d,Z.displayName||Z.key,l,q,K,B+_,$,i,Z.align||"left","middle"),d.restore(),K+=$+D+V}if(d.save(),d.beginPath(),d.rect(H+_,B+_+(m?i:0),M,G),d.clip(),b){var J=B+_+i*m+I;d.beginPath(),w&&m&&(J+=b/2,d.moveTo(H,J),d.lineTo(H+N,J),J+=b/2);for(var Q=0;Q<Y&&!(B+W<(J+=v+b/2));Q++)J<B||(d.moveTo(H,J),d.lineTo(H+N,J)),J+=b/2;d.strokeStyle=s,d.lineWidth=b,d.stroke()}if(a&&0<Y&&a.forEach(function(l,e){var u=e*v+b*(e+w*m*1)+i*m+_+I;if(K=H+_+O,!(B+G+v<u||u<B-i)){S&&S(d,l,e,{x:H,y:u,width:N,height:v});var h=c&&c.a(ie.HOVER_INDEX)===e,s=c&&c.a(ie.SELECT_INDEX)===e;s&&k?(d.fillStyle=k,d.fillRect(H,u,N,v)):!s&&h&&E&&(d.fillStyle=E,d.fillRect(H,u,N,v));for(var t=function(e){var t=f[e],a=t.drawCell,o=X[e]-2*V,r=t.bodyColor||t.color||p;s&&T&&(r=T),!s&&h&&C&&(r=C),"function"==typeof r&&(r=r(l[t.key],l)),K+=V;var i=l[t.key];t.format&&(i=t.format(i,l)),d.save(),d.beginPath(),d.rect(K,u,o,v),d.clip();var n=function(){t.isIcon?0<o&&Ce(d,ke(l[t.key]),"centerUniform",K,u+1,o,v-2,c,g):Ee(d,i,y,r,K,u,o,v,t.align||"left","middle")};a?a(d,i,{x:K,y:u,width:o,height:v},{column:t,font:y,color:r,index:e,row:l,defaultDraw:n}):n(),K+=o+D+V,d.restore()},a=0;a<U;a++)t(a)}}),x){var ee=0;X.forEach(function(e){ee+=e});var te={x:H+_,y:B+_+(m?i:0),width:M,height:G-(m?i:0)},ae={width:ee,height:v*Y+(Y-1)*b},oe={x:O,y:I},re=g.getDataUI(c);!function(e,t,a,o){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},i=arguments[5],n=t.x,l=t.y,u=t.width,h=t.height,s=a.width,d=a.height,c=o.x,g=o.y,f=void 0,v=void 0,p=null,y=null,_=void 0,D=void 0,b=r.color,w=void 0===b?"red":b,V=r.barWidth,m=void 0===V?8:V,E=r.gap,C=void 0===E?2:E,k=r.visible;if(e.save(),h<d){var T=h*(D=h/d);y=[n+u-m-C,l+-g*D,m,Math.max(T,me)],v=h-d,k&&(e.beginPath(),Ve.apply(void 0,[e].concat(de(y),[Math.min(m,T)/2])),e.fillStyle=w,e.fill())}if(u<s-2){var I=u*(_=u/s);p=[n+-c*_,l+h-m-C,Math.max(I,me),m],f=u-s,k&&(e.beginPath(),Ve.apply(void 0,[e].concat(de(p),[Math.min(m,I)/2])),e.fillStyle=w,e.fill())}i&&i.interactiveInfo&&(i.interactiveInfo.scrollBarX=p,i.interactiveInfo.scrollBarY=y,i.interactiveInfo.scaleX=_,i.interactiveInfo.scaleY=D,i.interactiveInfo.minX=f,i.interactiveInfo.minY=v),e.restore()}(d,te,ae,oe,{visible:!A||c.a(ie.SCROLL_BAR_VISIBLE),color:L,barWidth:P?R/g.getZoom():R,gap:2/g.getZoom()},re)}d.restore()}_&&Te(d,u,H,B,N,W,_)},ruler:function(s,e,t,a,o){t.getValue("value");var d=t.getValue("max"),c=t.getValue("min"),r=t.getValue("labelEvery"),i=t.getValue("labelFont"),n=t.getValue("labelColor"),l=t.getValue("labelAlign"),u=t.getValue("labelDistance"),h=t.getValue("labelOffsetX"),g=t.getValue("labelOffsetY"),f=t.getValue("direction"),v=t.getValue("paddingBefore"),p=t.getValue("paddingAfter"),y=t.getValue("background"),_=t.getValue("smallTickEvery"),D=t.getValue("smallTickColor"),b=t.getValue("smallTickWidth"),w=t.getValue("smallTickLongness"),V=t.getValue("mediumTickEvery"),m=t.getValue("mediumTickColor"),E=t.getValue("mediumTickWidth"),C=t.getValue("mediumTickLongness"),k=t.getValue("largeTickEvery"),T=t.getValue("largeTickColor"),I=t.getValue("largeTickWidth"),O=t.getValue("largeTickLongness"),x=t.getValue("reverse"),A=e.x,L=e.y,R=e.width,P=e.height;y&&(s.fillStyle=y,s.fillRect(A,L,R,P));var S=d-c,H=P;f!==he&&f!==ue||(H=R);var B=[{every:_,color:D,longness:w,width:b},{every:V,color:m,longness:C,width:E},{every:k,color:T,longness:O,width:I}];if(x){if(B.forEach(function(e){if(e.every){var t=we(e.longness,H);if(s.beginPath(),s.strokeStyle=e.color,s.lineWidth=e.width,f===ne||f===le){var a=A+R-v,o=(R-v-p)*(e.every/S),r=f===ne?L:L+P;f===le&&(t=0-t);for(var i=c;i<=d;i+=e.every)s.moveTo(a,r),s.lineTo(a,r+t),a-=o}else{var n=L+P-v,l=(P-v-p)*(e.every/S),u=f===he?A:A+R;f===ue&&(t=0-t);for(var h=c;h<=d;h+=e.every)s.moveTo(u,n),s.lineTo(u+t,n),n-=l}s.stroke()}}),r){var N=we(u,H);if(s.fillStyle=n,s.font=i,f===ne||f===le){var W=A+R-v+h,M=r/S*(R-v-p),G=(f===ne?L:L+P)+g;f===le?N=0-N-Be(i,"1").height:s.textBaseline="hanging";for(var U=c;U<=d;U+=r){var X=Be(i,U);l===se?be(s,U,i,n,W-.5*X.width,G+N,X.width,X.height,l,"middle"):l===ue?s.fillText(U,W-Be(i,U).width+2,G+N):l===he&&s.fillText(U,W,G+N),W-=M}}else{var Y=L+P-v+g,F=r/S*(P-v-p),j=(f===he?A:A+R)+h;s.textBaseline="middle",f===ue&&(N=0-N);for(var K=c;K<=d;K+=r){var z=K+"";f===ue?s.fillText(z,j+N-Be(i,z).width+2,Y):s.fillText(z,j+N,Y),Y-=F}}}}else if(B.forEach(function(e){if(e.every){var t=we(e.longness,H);if(s.beginPath(),s.strokeStyle=e.color,s.lineWidth=e.width,f===ne||f===le){var a=A+v,o=(R-v-p)*(e.every/S),r=f===ne?L:L+P;f===le&&(t=0-t);for(var i=c;i<=d;i+=e.every)s.moveTo(a,r),s.lineTo(a,r+t),a+=o}else{var n=L+v,l=(P-v-p)*(e.every/S),u=f===he?A:A+R;f===ue&&(t=0-t);for(var h=c;h<=d;h+=e.every)s.moveTo(u,n),s.lineTo(u+t,n),n+=l}s.stroke()}}),r){var Z=we(u,H);if(s.fillStyle=n,s.font=i,f===ne||f===le){var $=A+v+h,q=r/S*(R-v-p),J=(f===ne?L:L+P)+g;f===le?Z=0-Z-Be(i,"1").height:s.textBaseline="hanging";for(var Q=c;Q<=d;Q+=r){var ee=Be(i,Q);l===se?be(s,Q,i,n,$-.5*ee.width,J+Z,ee.width,ee.height,l,"middle"):l===ue?s.fillText(Q,$-Be(i,Q).width+2,J+Z):l===he&&s.fillText(Q,$,J+Z),$+=q}}else{var te=L+v+g,ae=r/S*(P-v-p),oe=(f===he?A:A+R)+h;s.textBaseline="middle",f===ue&&(Z=0-Z);for(var re=c;re<=d;re+=r){var ie=re+"";f===ue?s.fillText(ie,oe+Z-Be(i,ie).width+2,te):s.fillText(ie,oe+Z,te),te+=ae}}}},multilineText:function(t,e,a,o,r){var i=a.getValue("content"),n=a.getValue("font"),l=a.getValue("textAlign"),u=a.getValue("color"),h=a.getValue("lineHeight"),s=a.getValue("background"),d=a.getValue("padding"),c=a.getValue("borderColor"),g=a.getValue("borderWidth"),f=a.getValue("borderRadius"),v=a.getValue("dash"),p=a.getValue("dashPattern"),y=e.x,_=e.y,D=e.width,b=e.height,w=Ne(d),V=oe(w,4),m=V[0],E=V[1],C=(V[2],V[3]),k=Ne(f),T=oe(k,4),I=T[0],O=T[1],x=T[2],A=T[3];s&&(t.fillStyle=s,t.fillRect(y,_,D,b)),g&&(t.strokeStyle=c,t.beginPath(),v&&t.setLineDash(p),ht.Default.drawRoundRect(t,y,_,D,b,I,O,A,x),t.closePath(),t.stroke());var L=C,R=m,P=D-C-E;i.split(/\n/).forEach(function(e){S(t,e,n,u,L,R,P,h,l,"middle"),R+=h})}},buttonInteractor:new b,inputInteractor:new y,textAreaInteractor:new p,radioInteractor:new V,checkboxInteractor:new m,colorPickerInteractor:new x,dateTimePickerInteractor:new A,comboBoxInteractor:new B,tableInteractor:new xe,Color:g,ListView:P,ListDropDown:H,caluMultilineSize:function(e,t){var a=e.a("ht.content"),o=e.a(ie.FONT),r=e.a(ie.LINE_HEIGHT),i=e.a(ie.PADDING),n=Ne(i),l=oe(n,4),u=l[0],h=l[1],s=l[2],d=l[3],c=a.split(/\n/),g=0;return c.forEach(function(e){var t=Be(o,e);g=Math.max(g,t.width)}),{width:g+d+h,height:c.length*r+u+s}}},He=/firefox/.test(window.navigator.userAgent.toLowerCase()),Be=(Le={},Re=document?ht.Default.createCanvas().getContext("2d"):null,function(e,t){Re.font=e||labelFont;var a=Le[Re.font];return a||(a=2*Re.measureText("e").width,Le[Re.font]=a),{width:Re.measureText(t).width+2,height:a}}),Ne=function(e,t){if(!e)return We([],t);var a,o=(a=e,a?("string"!=typeof a&&(a+=""),a.replace(/^\s+|\s+$/g,"")):"").split(/\s+/g),r=[];return o.forEach(function(e){isNaN(e)||r.push(parseInt(e))}),We(r)},We=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return e&&0!==e.length?3===e.length?[e[0],e[1],e[2],e[1]]:2===e.length?[e[0],e[1],e[0],e[1]]:1===e.length?[e[0],e[0],e[0],e[0]]:[e[0],e[1],e[2],e[3]]:[t,t,t,t]},Me=function(e){e&&"textarea"===e||(e="input");var t=document.createElement(e),a=t.style;return a.display="block",a.boxSizing="border-box",a.position="absolute",a.outline="none",a.zIndex=1e4,a.borderWidth=0,a.backgroundColor="rgba(0, 0, 0, 0)",t},Ge=function(e,t,a){var o=t.style,r=a.rect,i=new ht.Math.Matrix2d,n=e.getZoom();ht.Default.layout(t,r),i.appendTranslate(e.tx(),e.ty()),i.appendScale(n,n),i.append(a.matrix),Ue(o,"transform","matrix("+i.a.toFixed(5)+", "+i.b.toFixed(5)+", "+i.c.toFixed(5)+",\n    "+i.d.toFixed(5)+", "+i.tx.toFixed(5)+", "+i.ty.toFixed(5)+")"),Ue(o,"transformOrigin",(-r.x).toFixed(5)+"px "+(-r.y).toFixed(5)+"px")},Ue=((Pe=document.createElement("input")).setAttribute("style","width: 0;height: 0;"),function(e,t,a){var o=t[0].toUpperCase+t.substring(1,t.length);e["webkit"+o]=a,e["moz"+o]=a,e["ms"+o]=a,e["o"+o]=a,e[t]=a}),Xe=function(e,t,a){for(var o=[],r=0,i=1,n=e.length;i<=n;i++){var l=e.substring(r,i);Be(a,l).width>t&&(i-1===r?(o.push(e.substring(r,i)),r=i):(o.push(e.substring(r,i-1)),r=i-1))}return r!==i-1&&o.push(e.substring(r,i)),o},Ye=function(e,t,a,o){for(var r=[],i=e.split("\n"),n=0,l=i.length;n<l;n++){var u=i[n];if(""===u&&(u=" "),o)Array.prototype.push.apply(r,Xe(u,a,t));else{for(var h,s,d="",c=void 0,g=void 0,f=void 0,v="",p=0;p<u.length;p++){u.charAt(p).match(/[a-z|A-Z]/g)?d+="1":d+="2"}d=(d=d.replace(/21/g,"2_1")).replace(/12/g,"1_2");for(var y=0;y<d.length;y++){d.charAt(y).match(/\_/g)&&(u=Fe(u,y+1,"|"))}h=u.split("|"),s=d.split("_");for(var _=0,D=h.length;_<D;_++)c=v+h[_],g=Be(t,c),"1"===s[_][0]?g.width>a?v?(r.push(v),v="",_--):(f=Xe(h[_],a,t),Array.prototype.push.apply(r,f.slice(0,f.length-1)),v=f[f.length-1]):g.width===a?(r.push(c),v=""):v=c:g.width>a?(f=Xe(c,a,t),Array.prototype.push.apply(r,f.slice(0,f.length-1)),v=f[f.length-1]):v=c;v&&r.push(v)}}return r},Fe=function(e,t,a){return e=e.substring(0,t-1)+a+e.substring(t-1,e.length)},je=function(e,t,a,o,r,i){return e?(t&&(t=new g(t)),e.a(ie.PRESSED)?o||(r&&t&&0!==t.a?ht.Default.darker(t,re.activeDarker):i?null:re.emptyColor):e.a(ie.HOVER)?a||(r&&t&&0!==t.a?ht.Default.darker(t,re.hoverDarker):i?null:re.emptyColor):i?null:t?t.getRGBA():re.emptyColor):t};function Ke(e,t){var a=e.prototype,o=ht.Default.getMSMap();for(var r in t)o[r]&&o.hasOwnProperty(r)?o[r](a,t):a[r]=t[r]}function ze(e,t){var a=t.getView().getBoundingClientRect(),o=t.getZoom(),r=t.tx(),i=t.ty(),n=e.getRect();return n.height*=o,n.width*=o,n.x=a.left+r+n.x*o,n.y=a.top+i+n.y*o,n}function Ze(e){var t=e.a(ie.VALUE);return void 0===t?"":t}var $e,qe,Je=($e=null,qe=function(e,t,a){"binaryString"===a?e.readAsBinaryString(t):"ArrayBuffer"===a?e.readAsArrayBuffer(t):"dataUrl"===a?e.readAsDataURL(t):e.readAsText(t)},function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=e.multiple,u=e.readType,h=e.filter,t=e.accept;$e||(($e=document.createElement("input")).setAttribute("type","file"),$e.setAttribute("id","hiddenFile"),$e.style.width=0,$e.style.height=0,$e.addEventListener("change",function(e){document.body.removeChild($e),$e=null;for(var t=e.target.files,a={files:[]},o=0;o<t.length;o++)h?h(t[o])&&a.files.push(t[o]):a.files.push(t[o]);if(u&&0!==a.files.length)if(l){var r=0;a.files.forEach(function(t){var e=new FileReader;e.onload=function(e){t.readResult=e.target.result,++r===a.files.length&&n(a)},qe(e,t,u)})}else{var i=new FileReader;i.onload=function(e){t[0].readResult=e.target.result,n(a)},qe(i,t[0],u)}else n(a)}),document.body.appendChild($e)),$e.multiple=!!l,$e.accept=t||"",$e.click()}),Qe=function(e,t){for(var a=[],o=0,r=0,i=void 0,n=0,l=e.length;n<l;n++)if(i=e[n].width||.1,isNaN(i)){var u=i.split("+"),h=parseFloat(u[0]),s=[];1<h?r+=h:o+=h,s.push(h),1<(h=parseFloat(u[1]))?(r+=h,s.unshift(h)):(o+=h,s.push(h)),a.push(s)}else 1<=(i=parseFloat(i))?r+=i=Math.max(12,i):o+=i,a.push(i);for(n=0,l=a.length;n<l;n++)(i=a[n])<1?a[n]=Math.max(0,i/o*(t-r)):i instanceof Array&&(a[n]=i[0]+Math.max(0,i[1]/o*(t-r)));return a},et=function(e){var t=oe(e,4);return{x:t[0],y:t[1],width:t[2],height:t[3]}},tt=function(e,t,a){var o,r,i,n=(i=t,(r=e)?r.getDataUI?r.getDataUI(i):r.getData3dUI?r.getData3dUI(i):void 0:null),l=(o=n)&&o.interactiveInfo&&o.interactiveInfo.bodyInfo?o.interactiveInfo.bodyInfo.compInfos:null;if(l)for(var u=0,h=l.length;u<h;u++){var s=l[u];if(s.comp===a)return s}return null},at="0.0.1";return Se.openColorDropDown=k,Se.openDateTimeDropDown=I,Se.getFormData=function(e,t){var n={},l=t?t.getChildren():e.dm().getDatas();return l.each(function(e){var t=e.a(ie.FORM_ITEM_NAME),a=e.a(ie.FORM_ITEM_GROUP);if(t)n[t]=Ze(e);else if(a&&!n[ie.FORM_ITEM_GROUP])if(e.a(ie.INPUT_TYPE)===_)for(var o=0;o<l.length;o++){var r=l.get(o);if(a===r.a(ie.FORM_ITEM_GROUP)&&r.a(ie.CHECKED)){n[a]=Ze(r);break}}else if(e.a(ie.INPUT_TYPE)===w){var i=[];l.each(function(e){a===e.a(ie.FORM_ITEM_GROUP)&&e.a(ie.CHECKED)&&i.push(Ze(e))}),n[a]=i}}),n},Se.selectFile=Je,Se.getVersion=function(){return at},Se});
